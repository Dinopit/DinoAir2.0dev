WATCHDOG PATCHES NEEDED:
============================================================

1. In _count_dinoair_processes(), after line 273, add:
   logger.debug(f"Detected DinoAir process: PID={info['pid']}, Name={name}, Cmdline={cmdline[:100]}")

2. In _monitor_loop(), replace lines 318-321 with:

                # If critical alert and self-termination enabled, perform emergency shutdown
                if critical_alert and self.self_terminate_on_critical:
                    logger.warning(f"Critical alert triggered. Self-terminate is {self.self_terminate_on_critical}")
                    if self.self_terminate_on_critical:  # Double-check the flag
                        self._perform_emergency_shutdown()
                        break  # Exit monitoring loop after emergency shutdown
                    else:
                        logger.warning("Self-termination disabled - NOT shutting down")


3. In _perform_emergency_shutdown(), add at the beginning:
   if not self.self_terminate_on_critical:
       logger.critical("Self-termination is DISABLED - aborting emergency shutdown")
       return

4. In _perform_emergency_shutdown(), before os._exit calls, add:
   if self.self_terminate_on_critical:  # Only exit if explicitly enabled
       os._exit(1)
   else:
       logger.critical("Self-termination disabled - NOT exiting")
